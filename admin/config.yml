backend:
  name: github
  repo: Rayz224/LCCGuides
  branch: main

media_folder: static/media
public_folder: /media

collections:
  # Collection 1: Events (parent)
  - name: "events"
    label: "Événements"
    folder: "guides"
    path: "events/{{slug}}"
    create: true
    slug: "{{slug}}"
    identifier_field: name
    fields:
      - label: "Nom de l'événement"
        name: "name"
        widget: "string"

      - label: "Slug"
        name: "slug"
        widget: "string"
        hint: "Nom convivial pour l'URL (ex: classique-champlain)"

  # Collection 2: Guide Editions (child)
  - name: "guide_editions"
    label: "Guides annuels"
    folder: "guides"
    create: true
    path: "{{event}}/{{year}}/{{event}}"
    extension: "md"
    slug: "{{event}}-{{year}}"
    label: "{{event}} - {{year}}"
    identifier_field: slug

    fields:
      - label: "Événement"
        name: "event"
        widget: "relation"
        collection: "events"
        search_fields: ["name", "slug"]
        value_field: "slug"
        display_fields: ["name"]
        hint: "Sélectionnez l'événement parent"

      - label: "Année"
        name: "year"
        widget: "number"
        value_type: "int"

      - label: "Logo (SVG seulement)"
        name: "logo"
        widget: "image"
        media_folder: "/guides/{{fields.event}}/{{fields.year}}"
        public_folder: "/guides/{{fields.event}}/{{fields.year}}"

      - label: "Contenu du guide"
        name: "body"
        widget: "markdown"
        required: true

      - label: "Status"
        name: "status"
        widget: "select"
        options: ["draft", "published"]
        default: "draft"